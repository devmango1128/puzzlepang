import{u as A,h as I,f as U,_ as j,a as E,b as F,c as G,d as Q,e as J}from"./DYJwDWjl.js";import{d as K,o as O,L as W,y as l,M as H,z as e,B as n,A as i,N as X,P as g,Q as h,J as Y,k as r,g as Z,q as P,O as tt,V as st,K as et,x as d,R as b,U as at,W as ot,_ as nt}from"./DHQQY5Qe.js";const it={class:"stage-select-page"},ct={class:"title-bar"},lt={class:"app-title"},rt={class:"title-actions"},dt={class:"stage-content"},ut={class:"stage-grid"},mt=["onClick"],_t={class:"stage-number"},pt={class:"stage-info"},ft={class:"stage-stars"},vt={key:0,class:"stage-record"},gt={class:"record-item"},ht={class:"record-item"},bt={class:"stage-summary"},yt={class:"summary-item"},kt={class:"summary-item"},xt=K({__name:"index",setup(St){const u=Y(),y=st(),v=et(),{initLocale:k,getDifficultyName:x}=I(),{initProgress:S,getStageProgress:z}=A(),{loadSounds:w,playListBgm:C,stopBgm:$}=U(),m=r(()=>y.params.difficulty||"easy"),B=r(()=>u.dark.isActive),_=Z(0),L=P().app.baseURL||"";function M(){u.dark.toggle(),localStorage.setItem("slidingPuzzle-dark-mode",String(u.dark.isActive))}async function N(){try{const t=await $fetch(`${L}stages.json`);_.value=t[m.value]||0}catch(t){console.error("Failed to fetch stage counts:",t)}}const f=r(()=>{const t=[];for(let a=1;a<=_.value;a++){const s=z(m.value,a);t.push({number:a,cleared:(s==null?void 0:s.cleared)||!1,stars:(s==null?void 0:s.stars)||0,bestTime:(s==null?void 0:s.bestTime)||0,bestMoves:(s==null?void 0:s.bestMoves)||0})}return t}),R=r(()=>f.value.filter(t=>t.cleared).length),T=r(()=>f.value.reduce((t,a)=>t+a.stars,0));function D(t){if(!t)return"-";const a=Math.floor(t/60),s=t%60;return`${a}:${String(s).padStart(2,"0")}`}function V(t){v.push(`/game/${m.value}/${t}`)}function q(){v.push("/")}return O(async()=>{k();const t=localStorage.getItem("slidingPuzzle-dark-mode");t!==null&&u.dark.set(t==="true"),await S(),await N(),w(),C()}),W(()=>{$()}),(t,a)=>{const s=tt,c=at;return d(),l("div",it,[a[0]||(a[0]=H('<div class="bg-decorations" data-v-660f17b2><img src="'+j+'" class="bg-icon" style="bottom:5%;left:24%;width:100px;animation-delay:0s;" alt="" data-v-660f17b2><img src="'+E+'" class="bg-icon" style="bottom:22%;right:20%;width:70px;animation-delay:1.5s;" alt="" data-v-660f17b2><img src="'+F+'" class="bg-icon" style="top:15%;right:10%;width:45px;animation-delay:0.3s;" alt="" data-v-660f17b2><img src="'+G+'" class="bg-icon" style="bottom:25%;left:5%;width:55px;animation-delay:0.8s;" alt="" data-v-660f17b2><img src="'+Q+'" class="bg-icon" style="top:20%;left:2%;width:80px;animation-delay:1.2s;" alt="" data-v-660f17b2><img src="'+J+'" class="bg-icon" style="bottom:10%;right:5%;width:30px;animation-delay:1.3s;" alt="" data-v-660f17b2></div>',1)),e("header",ct,[n(s,{flat:"",round:"",size:"md",icon:"arrow_back",color:"white",onClick:q}),e("span",lt,i(X(x)(m.value)),1),e("div",rt,[n(s,{flat:"",round:"",size:"md",color:"white",icon:B.value?"light_mode":"dark_mode",onClick:M},null,8,["icon"])])]),e("div",dt,[e("div",ut,[(d(!0),l(g,null,h(f.value,o=>(d(),l("div",{key:o.number,class:b(["stage-card",{cleared:o.cleared}]),onClick:p=>V(o.number)},[e("div",_t,"STAGE."+i(String(o.number).padStart(2,"0")),1),e("div",pt,[e("div",ft,[(d(),l(g,null,h(3,p=>n(c,{key:p,name:p<=o.stars?"star":"star_border",class:b({active:p<=o.stars}),size:"18px"},null,8,["name","class"])),64))]),o.cleared?(d(),l("div",vt,[e("div",gt,[n(c,{name:"timer",size:"12px"}),e("span",null,i(D(o.bestTime)),1)]),e("div",ht,[n(c,{name:"touch_app",size:"12px"}),e("span",null,i(o.bestMoves),1)])])):ot("",!0)]),n(c,{name:"chevron_right",size:"24px",class:"stage-arrow"})],10,mt))),128))])]),e("footer",bt,[e("div",yt,[n(c,{name:"emoji_events",size:"20px"}),e("span",null,i(R.value)+"/"+i(_.value),1)]),e("div",kt,[n(c,{name:"star",size:"20px"}),e("span",null,i(T.value)+"/"+i(_.value*3),1)])])])}}}),$t=nt(xt,[["__scopeId","data-v-660f17b2"]]);export{$t as default};
